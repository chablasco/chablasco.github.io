<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
		<meta name="viewport" content="initial-scale=1.0">

	<title>L$b</title>
	<style>
		* {
			margin: 0;
			padding:0;
		}
	</style>

</head>

<body>

<canvas id="duk" width="700" height="700">
</canvas>
<div id="stats"></div>

</body>


<script type="module">
import {quickSortPt, Point} from './modules/algs.js';

const duk = document.getElementById('duk');
const ctx = duk.getContext('2d');
ctx.strokeStyle = "black";

let pts = new Array();
for (let i = 0; i < 100; ++i) {
	pts[i] = new Point(
				Math.round(Math.random()*700),
				Math.round(Math.random()*700)
				);
}

function drawPts() {
	ctx.fillStyle = "white";
	ctx.fillRect(0,0,800,800);

	ctx.strokeStyle ="black";
	pts.forEach( p => {
		ctx.beginPath();
		ctx.ellipse(p.x, p.y, 1, 1, 0, 0, 2*Math.PI);
		ctx.stroke();
	});
}


function drawClosest(x,y) {

	let P = new Point(x,y);

	var sortpts = quickSortPt(pts, P).slice(0,6);
	document.getElementById("stats").innerHTML = sortpts.map(p => Math.sqrt(p.dist(P)));

	drawPts();
	ctx.fillStyle = "purple";
	sortpts.forEach(p => {
		ctx.beginPath();
		ctx.ellipse(p.x, p.y, 5, 5, 0, 0, 2*Math.PI);
		ctx.fill();
	});
}

duk.addEventListener("mousemove", function(e) {
	let mx = e.clientX;
	let my = e.clientY;
	drawClosest(mx,my);
});
</script>


</html>