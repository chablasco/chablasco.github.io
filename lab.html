<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
		<meta name="viewport" content="initial-scale=1.0">

	<title>L$b</title>
	<style>
	</style>

</head>

<body>

<canvas id="duk" width="800" height="800">
</canvas>

</body>


<script type="module">
import {quickSortPt, Point} from './modules/algs.js';

const duk = document.getElementById('duk');
const ctx = duk.getContext('2d');
ctx.strokeStyle = "black";

let pts = new Array();
for (let i = 0; i < 1000; ++i) {
	pts[i] = new Point(
				20+Math.round(Math.random()*780),
				20+Math.round(Math.random()*780)
				);
}

function drawPts() {
	ctx.fillStyle = "white";
	ctx.fillRect(0,0,800,800);

	ctx.strokeStyle ="black";
	pts.forEach( p => {
		ctx.beginPath();
		ctx.ellipse(p.x, p.y, 1, 1, 0, 0, 2*Math.PI);
		ctx.stroke();
	});
}


function drawClosest(x,y) {

	let P = new Point(x,y);

	var sortpts = quickSortPt(pts, P).slice(0,6);

	drawPts();
	ctx.fillStyle = "purple";
	sortpts.forEach(p => {
		ctx.beginPath();
		ctx.ellipse(p.x, p.y, 5, 5, 0, 0, 2*Math.PI);
		ctx.fill();
	});
}

document.addEventListener("mousemove", function(e) {
	let mx = e.clientX;
	let my = e.clientY;
	drawClosest(mx,my);
});
</script>


</html>